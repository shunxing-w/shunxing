<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>顺行</title>
    <meta name="keywords" content="个人博客, 技术分享" />
    <meta name="description" content="顺行个人博客，是一个专注于技术分享的博客。" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0">
    <link href="css/base.css" rel="stylesheet">
    <!--<link rel="stylesheet" href="css/bootstrap-theme.min.css">-->
    <link rel="stylesheet" href="css/bootstrap.min.css"/>
    <link rel="stylesheet" href="css/demo.css"/>
    <!--<script src="js/bootstrap.min.js"></script>-->
    <!--[if lt IE 9]>
    <script src="js/modernizr.js"></script>
    <![endif]-->
</head>
<body>
<div class="wrapper">
    <div class="banner">
        <div class="carousel-inner">
            <div class="item active ">
                <img class="img" alt="" src="images/head.png" />

            </div>

        </div>
        <div class="websiteDescription">
            <h2>天空没有翅膀的痕迹但我已飞过</h2>
<p>  不要沮丧，不必惊慌，做努力爬的蜗牛或坚持飞的笨鸟，我们试着长大，一路跌跌撞撞，然后遍体鳞伤。坚持着，总有一天，你会站在最亮的地方，活成自己曾经渴望的模样。</p>
        </div>
    </div>
    <header>
        <h1 id="logo"><a href="/"><img src="images/shunxing.png" width="260" height="60" alt="杨青个人博客"></a></h1>
        <nav>
            <ul class="">
                <li id="active"><a href="index.html">首页</a></li>
                | <li><a href="interlocution.html">有问必答</a></li>
                |<li><a href="knowledge.html">技术分享</a></li>
                |<li><a href="resource.html">资源分享</a></li>
                |<li><a href="fastrack.html">成神之路</a></li>
                |<li><a href="journaling.html">生活日记</a></li>
                |<li><a href="message.html">留言建议</a></li>
            </ul>
        </nav>
    </header>

    <div class="mainContent">
        <h2 class="title_tj">
            <p>知识<span>问答</span></p>
        </h2>
        <div class="bloglist">
            <div id="list">
                <div class="box clearfix">
                    <a class="close" href="javascript:;">×</a>
                    <img class="head" src="images/1.jpg" alt=""/>
                    <div class="content">
                        <div class="main">
                            <p class="txt">
                                <span class="user">小明：</span>用什么方法可以提高页面性能？页面性能在用户体验方面有哪些指标?
                            </p>

                        </div>
                        <div class="info clearfix">
                            <span class="time">02-14 23:01</span>
                            <a class="praise" href="javascript:;">赞</a>
                        </div>
                        <div class="praises-total" total="4" style="display: block;">4个人觉得很赞</div>
                        <div class="comment-list">
                            <div class="comment-box clearfix" user="self">
                                <img class="myhead" src="images/my.jpg" alt=""/>
                                <div class="comment-content">
                                    <p class="comment-text"><span class="user">我：</span>用缓存技术，页面加载后把js、css、image缓存下来</p>
                                    <p class="comment-time">
                                        2014-02-19 14:36
                                        <a href="javascript:;" class="comment-praise" total="1" my="0" style="display: inline-block">1 赞</a>
                                        <a href="javascript:;" class="comment-operate">删除</a>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="text-box">
                            <textarea class="comment" autocomplete="off">评论…</textarea>
                            <button class="btn ">回 复</button>
                            <span class="word"><span class="length">0</span>/140</span>
                        </div>
                    </div>
                </div>

                <div class="box clearfix">
                    <a class="close" href="javascript:;">×</a>
                    <img class="head" src="images/2.jpg" alt=""/>
                    <div class="content">
                        <div class="main">
                            <p class="txt">
                                <span class="user">萌萌哒：</span>jsp新手，求这段代码的详细解析分析
                            </p>
                            <img class="pic" src="images/img5.png" alt=""/>
                        </div>
                        <div class="info clearfix">
                            <span class="time">02-14 23:01</span>
                            <a class="praise" href="javascript:;">赞</a>
                        </div>
                        <div class="praises-total" total="0" style="display: none;"></div>
                        <div class="comment-list">
                            <div class="comment-box clearfix" user="other">
                                <img class="myhead" src="images/4.jpg" alt=""/>
                                <div class="comment-content">
                                    <p class="comment-text"><span class="user">呵呵哒：</span>去百度吧</p>
                                    <p class="comment-time">
                                        2014-02-19 14:36
                                        <a href="javascript:;" class="comment-praise" total="0" my="0">赞</a>
                                        <a href="javascript:;" class="comment-operate">回复</a>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="text-box">
                            <textarea class="comment" autocomplete="off">评论…</textarea>
                            <button class="btn ">回 复</button>
                            <span class="word"><span class="length">0</span>/140</span>
                        </div>
                    </div>
                </div>

                <div class="box clearfix">
                    <a class="close" href="javascript:;">×</a>
                    <img class="head" src="images/3.png" alt=""/>
                    <div class="content">
                        <div class="main">
                            <p class="txt">
                                <span class="user">老王：</span>类似QQ音乐、网易云音乐之类的网页播放器怎么实现的？ 麻烦把需要用的技术和大致思路说一下。                     </p>
                        </div>
                        <div class="info clearfix">
                            <span class="time">02-11 13:17</span>
                            <a class="praise" href="javascript:;">赞</a>
                        </div>
                        <div class="praises-total" total="0" style="display: none;"></div>
                        <div class="comment-list">

                        </div>
                        <div class="text-box">
                            <textarea class="comment" autocomplete="off">评论…</textarea>
                            <button class="btn ">回 复</button>
                            <span class="word"><span class="length">0</span>/140</span>
                        </div>
                    </div>
                </div>
            </div>


        </div>
    </div>
    <div class="sidebar">
        <div class="tit01">
            <h4>关注我</h4>
            <div class="gzwm">
                <ul>
                    <li><a class="xlwb" href="#" target="_blank">新浪微博</a></li>
                    <li><a class="txwb" href="#" target="_blank">腾讯微博</a></li>
                    <li><a class="wx" href="mailto:admin@admin.com">邮箱</a></li>
                </ul>
            </div>
        </div>
        <div class="news">

            <div class="moreSelect" id="lp_right_select">

                <div class="ms-top">
                    <ul class="hd" id="tab">
                        <li class="cur"><a href="/">点击排行</a></li>
                        <li><a href="/">最新文章</a></li>
                        <li><a href="/">站长推荐</a></li>
                    </ul>
                </div>
                <div class="ms-main" id="ms-main">
                    <div style="display: block;" class="bd bd-news" >
                        <ul>
                            <li><a href="/" target="_blank">写给web前端小白的一封信</a></li>
                            <li><a href="/" target="_blank">全栈 JavaScript 程序员的崛起</a></li>
                            <li><a href="/" target="_blank">整理的一些前端开发面试题</a></li>
                            <li><a href="/" target="_blank">简单的HTML5初步入门教程</a></li>
                            <li><a href="/" target="_blank">前端面试题之JavaScript</a></li>
                            <li><a href="/" target="_blank">JavaScript面向对象编程</a></li>
                        </ul>
                    </div>
                    <div  class="bd bd-news">
                        <ul>
                            <li><a href="/" target="_blank">原来以为，一个人的勇敢是，删掉他的手机号码...</a></li>
                            <li><a href="/" target="_blank">手机的16个惊人小秘密，据说99.999%的人都不知</a></li>
                            <li><a href="/" target="_blank">住在手机里的朋友</a></li>
                            <li><a href="/" target="_blank">教你怎样用欠费手机拨打电话</a></li>
                            <li><a href="/" target="_blank">你面对的是生活而不是手机</a></li>
                            <li><a href="/" target="_blank">豪雅手机正式发布! 在法国全手工打造的奢侈品</a></li>
                        </ul>
                    </div>
                    <div class="bd bd-news">
                        <ul>
                            <li><a href="/" target="_blank">手机的16个惊人小秘密，据说99.999%的人都不知</a></li>
                            <li><a href="/" target="_blank">你面对的是生活而不是手机</a></li>
                            <li><a href="/" target="_blank">住在手机里的朋友</a></li>
                            <li><a href="/" target="_blank">豪雅手机正式发布! 在法国全手工打造的奢侈品</a></li>
                            <li><a href="/" target="_blank">教你怎样用欠费手机拨打电话</a></li>
                            <li><a href="/" target="_blank">原来以为，一个人的勇敢是，删掉他的手机号码...</a></li>
                        </ul>
                    </div>
                </div>
                <!--ms-main end -->
                <div class="tuwen">
                    <h3>图文推荐</h3>
                    <ul>
                        <li><a href="/"><img src="images/01.jpg"><b>简单的HTML5初步入门教程</b></a>
                            <p><span class="tulanmu"><a href="/">基础入门</a></span><span class="tutime">2015-02-15</span></p>
                        </li>
                        <li><a href="/"><img src="images/02.jpg"><b>写给web前端小白的一封信</b></a>
                            <p><span class="tulanmu"><a href="/">基础入门</a></span><span class="tutime">2015-02-15</span></p>
                        </li>
                        <li><a href="/"><img src="images/06.jpg"><b>住在手机里的朋友</b></a>
                            <p><span class="tulanmu"><a href="/">生活日记</a></span><span class="tutime">2015-02-15</span></p>
                        </li>
                        <li><a href="/"><img src="images/04.jpg"><b>HTML和CSS达到什么程度才叫基础扎实</b></a>
                            <p><span class="tulanmu"><a href="/">基础入门</a></span><span class="tutime">2015-02-15</span></p>
                        </li>
                    </ul>
                </div>
            </div>


            <h4 class="links">
                <p>友情<span>链接</span></p>
            </h4>
            <ul class="website">
                <li><a href="/">个人博客</a></li>
                <li><a href="http://www.shunxingkeji.cn">个人网站</a></li>
                <li><a href="http://weibo.com/wshunxing">个人微博</a></li>
            </ul>
            <div class="guanzhu">扫描二维码关注<span>顺行博客</span>微信公众账号</div>
            <a href="/" class="weixin"><img src="images/ewm.jpg"></a> </div>
    </div>
    <div class="clearfloat"></div>
    <footer>
        <ul>
            版权所有 <a href="/" title="顺行个人博客">顺行制作</a>
        </ul>
    </footer>
</div>
<script>
    window.onload = function ()
    {
        var oLi = document.getElementById("tab").getElementsByTagName("li");
        var oUl = document.getElementById("ms-main").getElementsByTagName("div");

        for(var i = 0; i < oLi.length; i++)
        {
            oLi[i].index = i;
            oLi[i].onmouseover = function ()
            {
                for(var n = 0; n < oLi.length; n++) oLi[n].className="";
                this.className = "cur";
                for(var n = 0; n < oUl.length; n++) oUl[n].style.display = "none";
                oUl[this.index].style.display = "block"
            }
        }
        var list = document.getElementById('list');
        var boxs = list.children;

        var timer;

        //格式化日期
        function formateDate(date) {
            var y = date.getFullYear();
            var m = date.getMonth() + 1;
            var d = date.getDate();
            var h = date.getHours();
            var mi = date.getMinutes();
            m = m > 9 ? m : '0' + m;
            return y + '-' + m + '-' + d + ' ' + h + ':' + mi;
        }

        //删除节点
        function removeNode(node) {
            node.parentNode.removeChild(node);
        }

        /**
         * 赞分享
         * @param box 每个分享的div容器
         * @param el 点击的元素
         */
        function praiseBox(box, el) {
            var txt = el.innerHTML;
            var praisesTotal = box.getElementsByClassName('praises-total')[0];
            var oldTotal = parseInt(praisesTotal.getAttribute('total'));

            var newTotal;
            if (txt == '赞') {
                newTotal = oldTotal + 1;
                praisesTotal.setAttribute('total', newTotal);
                praisesTotal.innerHTML = (newTotal == 1) ? '我觉得很赞' : '我和' + oldTotal + '个人觉得很赞';
                el.innerHTML = '取消赞';
            }
            else {
                newTotal = oldTotal - 1;
                praisesTotal.setAttribute('total', newTotal);
                praisesTotal.innerHTML = (newTotal == 0) ? '' : newTotal + '个人觉得很赞';
                el.innerHTML = '赞';
            }
            praisesTotal.style.display = (newTotal == 0) ? 'none' : 'block';
        }

        /**
         * 发评论
         * @param box 每个分享的div容器
         * @param el 点击的元素
         */
        function reply(box, el) {
            var commentList = box.getElementsByClassName('comment-list')[0];
            var textarea = box.getElementsByClassName('comment')[0];
            var commentBox = document.createElement('div');
            commentBox.className = 'comment-box clearfix';
            commentBox.setAttribute('user', 'self');
            commentBox.innerHTML =
                    '<img class="myhead" src="images/my.jpg" alt=""/>' +
                    '<div class="comment-content">' +
                    '<p class="comment-text"><span class="user">我：</span>' + textarea.value + '</p>' +
                    '<p class="comment-time">' +
                    formateDate(new Date()) +
                    '<a href="javascript:;" class="comment-praise" total="0" my="0" style="">赞</a>' +
                    '<a href="javascript:;" class="comment-operate">删除</a>' +
                    '</p>' +
                    '</div>'
            commentList.appendChild(commentBox);
            textarea.value = '';
            textarea.onblur();
        }

        /**
         * 赞回复
         * @param el 点击的元素
         */
        function praiseReply(el) {
            var myPraise = parseInt(el.getAttribute('my'));
            var oldTotal = parseInt(el.getAttribute('total'));
            var newTotal;
            if (myPraise == 0) {
                newTotal = oldTotal + 1;
                el.setAttribute('total', newTotal);
                el.setAttribute('my', 1);
                el.innerHTML = newTotal + ' 取消赞';
            }
            else {
                newTotal = oldTotal - 1;
                el.setAttribute('total', newTotal);
                el.setAttribute('my', 0);
                el.innerHTML = (newTotal == 0) ? '赞' : newTotal + ' 赞';
            }
            el.style.display = (newTotal == 0) ? '' : 'inline-block'
        }

        /**
         * 操作留言
         * @param el 点击的元素
         */
        function operate(el) {
            var commentBox = el.parentNode.parentNode.parentNode;
            var box = commentBox.parentNode.parentNode.parentNode;
            var txt = el.innerHTML;
            var user = commentBox.getElementsByClassName('user')[0].innerHTML;
            var textarea = box.getElementsByClassName('comment')[0];
            if (txt == '回复') {
                textarea.focus();
                textarea.value = '回复' + user;
                textarea.onkeyup();
            }
            else {
                removeNode(commentBox);
            }
        }

        //把事件代理到每条分享div容器
        for (var i = 0; i < boxs.length; i++) {

            //点击
            boxs[i].onclick = function (e) {
                e = e || window.event;
                var el = e.srcElement;
                switch (el.className) {

                    //关闭分享
                    case 'close':
                        removeNode(el.parentNode);
                        break;

                    //赞分享
                    case 'praise':
                        praiseBox(el.parentNode.parentNode.parentNode, el);
                        break;

                    //回复按钮蓝
                    case 'btn':
                        reply(el.parentNode.parentNode.parentNode, el);
                        break

                    //回复按钮灰
                    case 'btn btn-off':
                        clearTimeout(timer);
                        break;

                    //赞留言
                    case 'comment-praise':
                        praiseReply(el);
                        break;

                    //操作留言
                    case 'comment-operate':
                        operate(el);
                        break;
                }
            }

            //评论
            var textArea = boxs[i].getElementsByClassName('comment')[0];

            //评论获取焦点
            textArea.onfocus = function () {
                this.parentNode.className = 'text-box text-box-on';
                this.value = this.value == '评论…' ? '' : this.value;
                console.log("1234")
                this.onkeyup();

            }

            //评论失去焦点
            textArea.onblur = function () {
                var me = this;
                var val = me.value;
                if (val == '') {
                    timer = setTimeout(function () {
                        me.value = '评论…';
                        me.parentNode.className = 'text-box';
                    }, 200);
                }
            }

            //评论按键事件
            textArea.onkeyup = function () {
                var val = this.value;
                var len = val.length;
                var els = this.parentNode.children;
                var btn = els[1];
                var word = els[2];
                if (len <=0 || len > 140) {
                    btn.className = 'btn btn-off';
                }
                else {
                    btn.className = 'btn';
                }
                word.innerHTML = len + '/140';
            }

        }
    }
</script>
</body>
</html>
